{% extends 'main.html' %}
{% load static %}
{% block content %}
<div class="main-container-offers">
  {% include 'control_panel.html' %}
  
  <div class="main-offers-mid">
    {% if post.id %}
      <h1>{{ post.title }}</h1>
      <p>{{ post.description }}</p>
      <img src="{{ post.image.url }}" width="200px" height="120px" alt="">

      <h2>Add Images</h2>
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="hidden">
          {{ form.as_p }}
        </div>

        <div id="formset-container">
          {{ formset.management_form }}
          
          <div class="image-input-container" id="image-input-0">
            <label for="id_form-0-image">
              <div class="image-preview" id="image-preview-0">
                <span>Click to Add Image</span>
              </div>
            </label>
            {{ formset.forms.0.image }}
          </div>
        </div>

        <input type="submit" value="Add Images">
      </form>

      <script src="{% static 'scripts/offer.js' %}" type="text/javascript"></script>
      <h2>Images</h2>
      <div>
        {% for image in images %}
          <img src="{{ image.image.url }}" width="100px" height="100px" alt="">
        {% endfor %}
      </div>

    {% else %}
    <form method="POST" enctype="multipart/form-data" class="add-offer">
      {% csrf_token %}
      <input type="text" name="title">
      <textarea name="description" id=""></textarea>
      <input type="file" name="image">
      <input type="submit" value="Dodaj">
    </form>
    {% endif %}
  </div>
</div>

{% endblock %}